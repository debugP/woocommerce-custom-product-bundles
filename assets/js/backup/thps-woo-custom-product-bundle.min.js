var thps_woo=(function(e,h,k){e(function(){if(typeof wc_add_to_cart_params==="undefined"){return false}c();var m=e("#dialog-box").dialog({autoOpen:false,modal:true,buttons:{OK:function(){e(this).dialog("close");var n=e(this).data("errorField");if(n){n.focus()}}},minWidth:350,maxWidth:500});e(".sample-kit").click(function(){var s=e(this).closest(".thps-actions-column");var r=s.find(".min_required").val();var n=s.find(".max_required").val();var q=s.find(".bundle_prod_id").val();var p=e("#thps_product_bundle_"+q);var o=p.find(".item-price:checked").length;if(r>0&&o<r){g(m,"",objectL10n.min_required.replace("%d",r));return false}if(n>0&&o>n){g(m,"",objectL10n.max_allowed.replace("%d",n));return false}return true});e(".custom-perfume").click(function(){var t=e(this).closest(".thps-actions-column");var s=t.find(".min_required").val();var n=t.find(".max_required").val();var r=t.find(".bundle_prod_id").val();var p=e("#thps_product_bundle_"+r);var o=p.find(".item-price:checked").length;var q=p.find(".ex-validation:checked").length;o=o-q;if(o==0){g(m,"",objectL10n.min_required.replace("%d",s));return false}if(s>0&&o<s){g(m,"",objectL10n.min_required.replace("%d",s));return false}if(n>0&&o>n){g(m,"",objectL10n.max_allowed.replace("%d",n));return false}return true});e(".perfume-therapy").click(function(){var q=e(this).closest(".thps-actions-column");var n=q.find(".min_required").val();var s=q.find(".max_required").val();var t=q.find(".bundle_prod_id").val();var A=e("#thps_product_bundle_"+t);var r=A.find(".item-price:checked").length;if(n>0&&r<n){g(m,"",objectL10n.min_required.replace("%d",n));return false}if(s>0&&r>s){g(m,"",objectL10n.max_allowed.replace("%d",s));return false}var o=true;var p=-1;var v=0;var z="";var y=e("textarea[name=qstn2]");if(y.val()==""){y.addClass("error-field");o=false;v++;if(p==-1){p=y}}else{y.removeClass("error-field")}var x=e("textarea[name=qstn4]");if(x.val()==""){x.addClass("error-field");o=false;v++;if(p==-1){p=x}}else{x.removeClass("error-field")}var w=e("textarea[name=qstn5]");if(w.val()==""){w.addClass("error-field");o=false;v++;if(p==-1){p=w}}else{w.removeClass("error-field")}var u=e("input[name=emailAddress]");if(u.val()==""){if(v==0){z=objectL10n.email_required}u.addClass("error-field");o=false;v++;if(p==-1){p=u}}else{if(!l(u.val())){if(v==0){z=objectL10n.invalid_email}u.addClass("error-field");o=false;v++;if(p==-1){p=u}}else{u.removeClass("error-field")}}if(!o){if(z==""){z=objectL10n.fill_req_fields}g(m,p,z);return false}return true})});function g(n,m,o){n.data("errorField",m);e("#dialog-box-msg").html(o);n.dialog("open")}var l=function j(m){var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return n.test(m)};var b=function i(t,p){var r=e("#thps_product_bundle_"+p);var m=r.find(".bundle_initial_value").val();var q=r.find(".bundle_initial_display_value").val();var s=parseFloat(m);s=isNaN(s)?0:s;var o=parseFloat(q);o=isNaN(o)?0:o;var n={};r.find(".item-price:checked").each(function(y){var v=e(this).closest("span");var A=parseFloat(this.value);var z=v.find(".product_id").val();var u=v.find(".display_price").val();var x=v.find(".quantity").val();var C=v.find(".tax_included").val();var B=v.find(".title").val();var w=v.find(".desc").val();A=isNaN(A)?0:A;s=s+A;u=parseFloat(u);u=isNaN(u)?0:u;o=o+u;n[z]={quantity:x,price:A,tax_included:C,title:B,desc:w}});s=isNaN(s)?0:s.toFixed(2);o=isNaN(o)?0:o.toFixed(2);r.find(".bundle_total").val(s);r.find(".bundle_items").val(JSON.stringify(n));r.find(".bundle_total_display").html(o)};var c=function d(){e(".thps_product_bundle").each(function(o){var r=e(this);var m=r.find(".bundle_initial_value").val();var q=r.find(".bundle_initial_display_value").val();var s=parseFloat(m);s=isNaN(s)?0:s;var p=parseFloat(q);p=isNaN(p)?0:p;var n={};r.find(".item-price:checked").each(function(x){var u=e(this).closest("span");var z=parseFloat(this.value);var y=u.find(".product_id").val();var t=u.find(".display_price").val();var w=u.find(".quantity").val();var B=u.find(".tax_included").val();var A=u.find(".title").val();var v=u.find(".desc").val();z=isNaN(z)?0:z;s=s+z;t=parseFloat(t);t=isNaN(t)?0:t;p=p+t;n[y]={quantity:w,price:z,tax_included:B,title:A,desc:v}});s=isNaN(s)?0:s.toFixed(2);p=isNaN(p)?0:p.toFixed(2);r.find(".bundle_total").val(s);r.find(".bundle_items").val(JSON.stringify(n));r.find(".bundle_total_display").html(p)})};var f=function a(m){if(m!="null"){k.location.href=m}};return{selectBundleItem:b,jumpto:f}}(window.jQuery,window,document));function selectBundleItem(b,a){thps_woo.selectBundleItem(b,a)}function jumptoUrl(a){thps_woo.jumpto(a)};